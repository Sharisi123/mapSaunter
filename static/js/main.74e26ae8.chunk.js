(this.webpackJsonpmapa1=this.webpackJsonpmapa1||[]).push([[0],{171:function(e,t,n){},172:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},200:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(38),a=n.n(i),o=(n(171),n(15)),s=(n(172),n(39)),d=n(40),l=n(42),u=n(41),j=n(12),b=n(51),p=n(18),O=n.n(p),h=n(29),f=n(11),m=n(164).create({baseURL:"https://maptz-b2e49-default-rtdb.europe-west1.firebasedatabase.app/"}),x=function(){return m.get("/-MWeYjhdAcOrIGuTaxbO.json")},g=function(e){return m.post("/-MWeYjhdAcOrIGuTaxbO.json",e)},v=function(e){return m.put("/-MWeYjhdAcOrIGuTaxbO.json",e)},T="SET_DIRECTIONS_TO_RENDER",y="SET_TOUCHED",w="SET_CURRENT_DIRECTIONS",M="SET_DIRECTION_TO_MODAL_MAP",C="CLEAR_DIRECTION_TO_MODAL_MAP",D="CLEAR_CURRENT_DIRECTIONS",R="SET_ID_KEYS",S={directionsToRender:null,directionToModalMap:null,directions:null,loading:!0,touched:!1,idKeys:null},N=function(){return function(e){x().then((function(t){var n=[];Object.keys(t.data).forEach((function(e,t){n.push(e)})),e(E(Object.values(t.data))),e(L(n))}))}},E=function(e){return{type:T,directionsToRender:e}},k=function(e){return{type:w,directions:e}},I=function(e){return{type:y,touched:e}},L=function(e){return{type:R,idKeys:e}},_=function(){return{type:D}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(f.a)(Object(f.a)({},e),{},{directionsToRender:t.directionsToRender});case w:return Object(f.a)(Object(f.a)({},e),{},{directions:t.directions});case M:return Object(f.a)(Object(f.a)({},e),{},{directionToModalMap:t.directionToModalMap});case C:return Object(f.a)(Object(f.a)({},e),{},{directionToModalMap:null});case D:return Object(f.a)(Object(f.a)({},e),{},{directions:null});case y:return Object(f.a)(Object(f.a)({},e),{},{touched:t.touched});case R:return Object(f.a)(Object(f.a)({},e),{},{idKeys:t.idKeys});default:return e}},K=(n(196),n(197),n(198),n(1)),F=function(){return Object(K.jsx)("div",{className:"center",children:Object(K.jsxs)("div",{className:"lds-ring",children:[Object(K.jsx)("div",{}),Object(K.jsx)("div",{}),Object(K.jsx)("div",{}),Object(K.jsx)("div",{})]})})},G=function(e){var t=e.getCurrentDirections,n=e.item,r=e.index,i=e.addElemToStart,a=e.directionsToRender,s=Object(c.useState)(n.favorite.change),d=Object(o.a)(s,2),l=d[0],u=d[1];return Object(K.jsxs)("div",{className:"ways-item-container",children:[Object(K.jsxs)("li",{className:"ways-item",onClick:function(){t(r)},children:[Object(K.jsx)("div",{children:Object(K.jsx)("h5",{children:n.title})}),Object(K.jsxs)("div",{className:"ways-kilometrs",children:[Object(K.jsx)("div",{children:n.direction.routes[0].legs.reduce((function(e,t){return e+t.distance.value}),0)+" m"}),Object(K.jsx)("div",{children:Math.round(n.direction.routes[0].legs.reduce((function(e,t){return e+t.duration.value/60}),0))+" min"})]})]}),Object(K.jsx)("div",{className:"favorite",children:Object(K.jsx)("button",{onClick:Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((function(e){return!e})),e.next=3,i(a,l,r);case 3:case"end":return e.stop()}}),e)}))),children:Object(K.jsx)("i",{className:"".concat(l?"fas":"far"," fa-star")})},r)})]})},P=Object(j.b)((function(e){return{idKeys:e.mapSection.idKeys}}),{addElemToStart:function(e,t,n){return function(){var c=Object(h.a)(O.a.mark((function c(r){var i,a,o,s;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:(i=e.concat())[n].favorite.change=!t,!0===!t?(i.splice(n,1),i.unshift(e[n])):(a=i.filter((function(e){return!0===e.favorite.change})),o=i.filter((function(e){return!0!==e.favorite.change})),s=[],0!==a.length&&s.push.apply(s,Object(b.a)(a)),0!==o.length&&s.push.apply(s,Object(b.a)(o)),i=s.concat()),v(i),r(k(i));case 5:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(e.directionsToRender),s=(Object(o.a)(a,1)[0],e.directionsToRender.filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())})));return Object(K.jsxs)("div",{className:"ways",id:"ways",children:[Object(K.jsx)("div",{className:"input-group",children:Object(K.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:function(e){return i(e.target.value)},value:r})}),Object(K.jsx)("ul",{className:"ways-container",children:0===e.directionsToRender.length?Object(K.jsx)(F,{}):Object(K.jsx)(K.Fragment,{children:s.map((function(t,n){return Object(K.jsx)(G,{item:t,index:n,directionsToRender:e.directionsToRender,getCurrentDirections:e.getCurrentDirections,addElemToStart:e.addElemToStart},t.id)}))})})]})})),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={change:!1},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.getDirectionsToRender()}},{key:"render",value:function(){return Object(K.jsx)("div",{children:null===this.props.directionsToRender?Object(K.jsx)(F,{}):Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(P,{directionsToRender:this.props.directionsToRender,getCurrentDirections:this.props.getCurrentDirections,clearCurrentDirections:this.props.clearCurrentDirections})})})}}]),n}(r.a.Component),z=Object(j.b)((function(e){return{directionsToRender:e.mapSection.directionsToRender}}),{getDirectionsToRender:N,getCurrentDirections:function(e){return function(t){t(I(!0));var n=window.store.getState().mapSection.directionsToRender[e];t(k(n))}},clearCurrentDirections:_})(U),B=(n(200),n(21)),J=n(20),W=Object(J.d)(B.withScriptjs,B.withGoogleMap,Object(j.b)(null,{clearCurrentDirections:_}))((function(e){var t=e.responce,n=e.clearCurrentDirections,r=t.direction.routes[0].legs.length;return Object(c.useEffect)((function(){return function(){n()}})),Object(K.jsxs)("div",{children:[Object(K.jsx)("h3",{children:t.title}),Object(K.jsx)(B.GoogleMap,{defaultZoom:12,defaultCenter:new window.google.maps.LatLng(49.425518,32.04849),children:Object(K.jsx)(B.DirectionsRenderer,{directions:t.direction})}),Object(K.jsxs)("p",{children:[Object(K.jsx)("b",{children:"Distance:"})," ",t.direction.routes[0].legs.reduce((function(e,t){return e+t.distance.value}),0)+" m"]}),Object(K.jsxs)("p",{children:[Object(K.jsx)("b",{children:"Duration:"})," ",Math.round(t.direction.routes[0].legs.reduce((function(e,t){return e+t.duration.value/60}),0))+" min"]}),Object(K.jsxs)("p",{children:[Object(K.jsx)("b",{children:"Origin:"})," ",t.direction.routes[0].legs[0].start_address]}),Object(K.jsxs)("p",{children:[Object(K.jsx)("b",{children:"Destination:"})," ",t.direction.routes[0].legs[r-1].start_address]})]})})),Y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(K.jsx)("div",{children:this.props.touched?null===this.props.directions?Object(K.jsx)(F,{}):Object(K.jsx)("div",{children:Object(K.jsx)(W,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAG4N54TJgsvI_y-omKVtkxuySRk3v0DbI&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(K.jsx)("div",{style:{height:"100%"}}),containerElement:Object(K.jsx)("div",{style:{height:"400px"}}),mapElement:Object(K.jsx)("div",{style:{height:"100%"}}),responce:this.props.directions})}):"Chose a direction"})}}]),n}(r.a.Component),V=Object(j.b)((function(e){return{touched:e.mapSection.touched,directions:e.mapSection.directions}}))(Y),Z=(n(396),function(e){return Object(K.jsxs)("header",{className:"header",children:[Object(K.jsx)("span",{className:"logo",children:"Saunter"}),Object(K.jsx)("button",{className:"btn btn-primary",onClick:e.handleOpened,children:"Add path"})]})}),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(K.jsx)(Z,{handleOpened:this.props.handleOpened,loadingElement:Object(K.jsx)("div",{style:{height:"100%"}}),containerElement:Object(K.jsx)("div",{style:{height:"400px"}}),mapElement:Object(K.jsx)("div",{style:{height:"100%"}})})}}]),n}(r.a.Component),q=(n(397),n(43)),Q=n(97),X=Object(J.d)(B.withScriptjs,B.withGoogleMap,Object(j.b)((function(e){return{directionToModalMap:e.mapSection.directionToModalMap}}),{renderDirection:function(e){return function(t){var n=new window.google.maps.DirectionsService,c=e.map((function(e){return{location:"".concat(e.lat()," ").concat(e.lng())}}));n.route({origin:new window.google.maps.LatLng(e[0].lat(),e[0].lng()),destination:new window.google.maps.LatLng(e[e.length-1].lat(),e[e.length-1].lng()),travelMode:window.google.maps.TravelMode.WALKING,waypoints:c},(function(e,n){n===window.google.maps.DirectionsStatus.OK?t({type:M,directionToModalMap:e}):console.error("error fetching directions ".concat(e))}))}},clearDirectionToModalMapAC:function(){return{type:C}},getDirectionsToRender:N}))((function(e){var t,n=[],r=Object(c.useState)(n.concat()),i=Object(o.a)(r,2),a=i[0],s=i[1];return Object(c.useEffect)((function(){return function(){e.clearDirectionToModalMapAC()}}),[]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(B.GoogleMap,{defaultZoom:12,defaultCenter:new window.google.maps.LatLng(49.425518,32.04849),onClick:function(e){n.push(e.latLng),s((function(t){return[].concat(Object(b.a)(t),[e.latLng])}))},children:[Object(K.jsx)(B.DirectionsRenderer,{directions:e.directionToModalMap}),a.map((function(e,t){return Object(K.jsx)(Q.Marker,{position:{lat:e.lat(),lng:e.lng()}},t)}))]}),a.length>1?Object(K.jsx)("button",(t={className:"modal-add-path-btn"},Object(q.a)(t,"className","btn btn-primary"),Object(q.a)(t,"onClick",Object(h.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.renderDirection(a);case 2:case"end":return t.stop()}}),t)})))),Object(q.a)(t,"children","\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0443\u0442\u044c"),t)):null]})})),$=function(e,t,n){switch(e){case"title":return Object(K.jsxs)("div",{className:"modal-title-block",children:[Object(K.jsx)("div",{className:"modal-input-title",children:"Title"}),Object(K.jsx)("input",{type:"text",placeholder:"Text input",value:t,onChange:function(e){return n(e.target.value)}})]});case"shortDesc":return Object(K.jsxs)("div",{className:"modal-short-description",children:[Object(K.jsx)("div",{className:"modal-input-title",children:"Short description"}),Object(K.jsx)("textarea",{type:"text",placeholder:"Text area",value:t,onChange:function(e){return n(e.target.value)}})]});case"fullDesc":return Object(K.jsxs)("div",{className:"modal-full-description",children:[Object(K.jsx)("div",{className:"modal-input-title",children:"Full description"}),Object(K.jsx)("textarea",{type:"text",placeholder:"Text area",value:t,onChange:function(e){return n(e.target.value)}})]})}},ee=Object(j.b)((function(e){return{directionToModalMap:e.mapSection.directionToModalMap,directionsToRender:e.mapSection.directionsToRender}}),{deployToFireBase:function(e,t,n,c,r){return function(){var r=Object(h.a)(O.a.mark((function r(i){return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g({title:e,shortDescription:t,fullDescription:n,direction:c,favorite:{change:!1},id:window.store.getState().mapSection.directionsToRender.length});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),d=s[0],l=s[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),b=j[0],p=j[1];return Object(K.jsx)("div",{className:"modal-backgrond",onClick:e.handleOpened,children:Object(K.jsxs)("div",{className:"modal-path",onClick:function(e){return e.stopPropagation()},id:"modal-path",children:[Object(K.jsxs)("div",{className:"header",children:[Object(K.jsx)("span",{children:"Add new Path"}),Object(K.jsx)("div",{onClick:e.handleOpened,className:"modal-close",children:"\xd7"})]}),Object(K.jsxs)("div",{className:"modal-content",children:[$("title",r,i),$("shortDesc",d,l),$("fullDesc",b,p),Object(K.jsx)("div",{className:"modal-deploy-btn",children:Object(K.jsx)("button",{className:"btn btn-primary",disabled:!(r&&d&&b&&e.directionToModalMap),onClick:function(){e.deployToFireBase(r,d,b,e.directionToModalMap),e.handleOpened()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0443\u0442\u044c"})})]}),Object(K.jsx)("div",{className:"modal-map",id:"modal-map",children:Object(K.jsx)(X,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAG4N54TJgsvI_y-omKVtkxuySRk3v0DbI&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(K.jsx)("div",{style:{height:"100%"}}),containerElement:Object(K.jsx)("div",{style:{position:"relative",width:"100%",height:"100%",zIndex:10}}),mapElement:Object(K.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:"12px",zIndex:10}})})})]})})}));var te=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=function(){c((function(e){return!e}))};return Object(K.jsxs)("div",{className:"app",children:[Object(K.jsx)(H,{handleOpened:i}),Object(K.jsx)(z,{}),Object(K.jsx)(V,{}),n?Object(K.jsx)(ee,{handleOpened:i}):""]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,399)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},ce=n(166),re=Object(J.c)({mapSection:A}),ie=Object(J.e)(re,Object(J.a)(ce.a));window.store=ie;var ae=ie;a.a.render(Object(K.jsx)(r.a.StrictMode,{children:Object(K.jsx)(j.a,{store:ae,children:Object(K.jsx)(te,{})})}),document.getElementById("root")),ne()}},[[398,1,2]]]);
//# sourceMappingURL=main.74e26ae8.chunk.js.map